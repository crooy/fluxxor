!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Fluxxor=e():t.Fluxxor=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=13)}([function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e){e(t)},u=function(t,e){return t.find(function(t){return e.indexOf(t)!==-1})},c=function(){function t(e){o(this,t),this.stores={},this.currentDispatch=null,this.currentActionType=null,this.waitingToDispatch=[],this.dispatchInterceptor=a,this._boundDispatch=this._dispatch.bind(this);for(var n in e)e.hasOwnProperty(n)&&this.addStore(n,e[n])}return s(t,[{key:"addStore",value:function(t,e){e.dispatcher=this,this.stores[t]=e}},{key:"dispatch",value:function(t){this.dispatchInterceptor(t,this._boundDispatch)}},{key:"_dispatch",value:function(t){var e=this;if(!t||!t.type)throw new Error("Can only dispatch actions with a 'type' property");if(this.currentDispatch){var n="Cannot dispatch an action ('"+t.type+"') while another action ('"+this.currentActionType+"') is being dispatched";throw new Error(n)}this.waitingToDispatch=i({},this.stores),this.currentActionType=t.type,this.currentDispatch={},Object.keys(this.stores).forEach(function(t){e.currentDispatch[t]={resolved:!1,waitingOn:[],waitCallback:null}});try{this.doDispatchLoop(t)}finally{this.currentActionType=null,this.currentDispatch=null}}},{key:"doDispatchLoop",value:function(t){var e=this,n=void 0,o=void 0,i=!1,s=[],a=[];if(Object.keys(this.waitingToDispatch).forEach(function(c){if(n=e.currentDispatch[c],o=!n.waitingOn.length||!u(n.waitingOn,Object.keys(e.waitingToDispatch))){if(n.waitCallback){var f=n.waitingOn.map(function(t){return e.stores[t]}),l=n.waitCallback;n.waitCallback=null,n.waitingOn=[],n.resolved=!0,l.apply(void 0,r(f)),i=!0}else{n.resolved=!0;var h=e.stores[c].__handleAction__(t);h&&(i=!0)}a.push(c),e.currentDispatch[c].resolved&&s.push(c)}}),Object.keys(this.waitingToDispatch).length&&!a.length){var c=Object.keys(this.waitingToDispatch).join(", ");throw new Error("Indirect circular wait detected among: "+c)}s.forEach(function(t){delete e.waitingToDispatch[t]}),Object.keys(this.waitingToDispatch).length&&this.doDispatchLoop(t),!i&&console&&console.warn&&console.warn("An action of type "+t.type+" was dispatched, but no store handled it")}},{key:"waitForStores",value:function(t,e,n){var r=this;if(!this.currentDispatch)throw new Error("Cannot wait unless an action is being dispatched");var o=Object.keys(this.stores).find(function(e){return r.stores[e]===t});if(e.indexOf(o)>-1)throw new Error("A store cannot wait on itself");var i=this.currentDispatch[o];if(i.waitingOn.length)throw new Error(o+" already waiting on stores");e.forEach(function(t){var e=r.currentDispatch[t];if(!r.stores[t])throw new Error("Cannot wait for non-existent store "+t);if(e.waitingOn.indexOf(o)>-1)throw new Error("Circular wait detected between "+o+" and "+t)}),i.resolved=!1;var s=e.filter(function(t){return i.waitingOn.indexOf(t)===-1});i.waitingOn=i.waitingOn.concat(s),i.waitCallback=n}},{key:"setDispatchInterceptor",value:function(t){t?this.dispatchInterceptor=t:this.dispatchInterceptor=a}}]),t}();e.default=c},function(t,e,n){"use strict";function r(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(){this._events=new r,this._eventsCount=0}var s=Object.prototype.hasOwnProperty,a="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(a=!1)),i.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)s.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},i.prototype.listeners=function(t,e){var n=a?a+t:t,r=this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,s=new Array(i);o<i;o++)s[o]=r[o].fn;return s},i.prototype.emit=function(t,e,n,r,o,i){var s=a?a+t:t;if(!this._events[s])return!1;var u,c,f=this._events[s],l=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),l){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,r),!0;case 5:return f.fn.call(f.context,e,n,r,o),!0;case 6:return f.fn.call(f.context,e,n,r,o,i),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];f.fn.apply(f.context,u)}else{var h,p=f.length;for(c=0;c<p;c++)switch(f[c].once&&this.removeListener(t,f[c].fn,void 0,!0),l){case 1:f[c].fn.call(f[c].context);break;case 2:f[c].fn.call(f[c].context,e);break;case 3:f[c].fn.call(f[c].context,e,n);break;case 4:f[c].fn.call(f[c].context,e,n,r);break;default:if(!u)for(h=1,u=new Array(l-1);h<l;h++)u[h-1]=arguments[h];f[c].fn.apply(f[c].context,u)}}return!0},i.prototype.on=function(t,e,n){var r=new o(e,n||this),i=a?a+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):(this._events[i]=r,this._eventsCount++),this},i.prototype.once=function(t,e,n){var r=new o(e,n||this,!0),i=a?a+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):(this._events[i]=r,this._eventsCount++),this},i.prototype.removeListener=function(t,e,n,o){var i=a?a+t:t;if(!this._events[i])return this;if(!e)return 0===--this._eventsCount?this._events=new r:delete this._events[i],this;var s=this._events[i];if(s.fn)s.fn!==e||o&&!s.once||n&&s.context!==n||(0===--this._eventsCount?this._events=new r:delete this._events[i]);else{for(var u=0,c=[],f=s.length;u<f;u++)(s[u].fn!==e||o&&!s[u].once||n&&s[u].context!==n)&&c.push(s[u]);c.length?this._events[i]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new r:delete this._events[i]}return this},i.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0===--this._eventsCount?this._events=new r:delete this._events[e])):(this._events=new r,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=a,i.EventEmitter=i,t.exports=i},function(t,e){function n(t){var e=r(t)?a.call(t):"";return e==o||e==i}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var o="[object Function]",i="[object GeneratorFunction]",s=Object.prototype,a=s.toString;t.exports=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=n(9),u=r(a),c=["flux","waitFor"],f=function(t){return c.forEach(function(e){if(t[e])throw new Error("Reserved key '"+e+"' found in store definition")}),function(e){function n(e){o(this,n);var r=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));for(var s in t)"actions"===s?r.bindActions(t[s]):"initialize"===s||("function"==typeof t[s]?r[s]=t[s].bind(r):r[s]=t[s]);return t.initialize&&t.initialize.call(r,e),r}return s(n,e),n}(u.default)};e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return Array.isArray(t)?t:Array.from(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(1),f=n(12),l=r(f),h=n(0),p=r(h),d=n(2),y=r(d),v=n(11),w=r(v),b=function t(e,n,r){n=n||[];for(var o in e)e.hasOwnProperty(o)&&((0,y.default)(e[o])?r(n.concat(o),e[o]):t(e[o],n.concat(o),r))},x=function(t){function e(t,n){i(this,e);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));r.dispatcher=new p.default(t),r.actions={},r.stores={};var o=r.dispatcher,a=r;return r.dispatchBinder={flux:a,dispatch:function(t,e){try{a.emit("dispatch",t,e)}finally{o.dispatch({type:t,payload:e})}}},r.addActions(n),r.addStores(t),r}return a(e,t),u(e,[{key:"addActions",value:function(t){b(t,[],this.addAction.bind(this))}},{key:"addAction",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];if(arguments.length<2)throw new Error("addAction requires at least two arguments, a string (or array of strings) and a function");if(!(0,y.default)(n[n.length-1]))throw new Error("The last argument to addAction must be a function");var i=n.pop().bind(this.dispatchBinder);(0,w.default)(n[0])||(n=n[0]);var s=n,a=o(s),u=a[0],c=a.slice(1),f=c.reduce(function(t,e){var n=t[t.length-1].concat([e]);return t.concat([n])},[[u]]);if(f.forEach(function(e){if((0,y.default)(l.default.get(t.actions,e)))throw new Error("An action named "+n.join(".")+" already exists")}),l.default.withInheritedProps.get(this.actions,n))throw new Error("A namespace named "+n.join(".")+" already exists");l.default.set(this.actions,n,i)}},{key:"store",value:function(t){return this.stores[t]}},{key:"getAllStores",value:function(){return this.stores}},{key:"addStore",value:function(t,e){if(t in this.stores)throw new Error("A store named '"+t+"' already exists");e.flux=this,this.stores[t]=e,this.dispatcher.addStore(t,e),e.dispatcher=this.dispatcher}},{key:"addStores",value:function(t){for(var e in t)t.hasOwnProperty(e)&&this.addStore(e,t[e])}},{key:"setDispatchInterceptor",value:function(t){this.dispatcher.setDispatchInterceptor(t)}}]),e}(c.EventEmitter);e.default=x},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){var e=t.PropTypes;return{componentWillMount:function(){if(console&&console.warn){var t=this.constructor.displayName?" in "+this.constructor.displayName:"",e="Fluxxor.FluxChildMixin was found in use"+t+", but has been deprecated. Use Fluxxor.FluxMixin instead.";console.warn(e)}},contextTypes:{flux:e.object},getFlux:function(){return this.context.flux}}};r.componentWillMount=function(){throw new Error("Fluxxor.FluxChildMixin is a function that takes React as a parameter and returns the mixin, e.g.: mixins[Fluxxor.FluxChildMixin(React)]")},e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){var e=t.PropTypes;return{componentWillMount:function(){if(!(this.props.flux||this.context&&this.context.flux)){var t=this.constructor.displayName?" of "+this.constructor.displayName:"";throw new Error("Could not find flux on this.props or this.context"+t)}},childContextTypes:{flux:e.object},contextTypes:{flux:e.object},getChildContext:function(){return{flux:this.getFlux()}},getFlux:function(){return this.props.flux||this.context&&this.context.flux}}};r.componentWillMount=function(){throw new Error("Fluxxor.FluxMixin is a function that takes React as a parameter and returns the mixin, e.g.: mixins: [Fluxxor.FluxMixin(React)]")},e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Array.prototype.slice.call(e);return{componentDidMount:function(){var t=this,e=this.props.flux||this.context.flux;this.mounted=!0,this._setStateFromFlux=function(){t.mounted&&t.setState(t.getStateFromFlux())},r.forEach(function(n){e.store(n).on("change",t._setStateFromFlux)})},componentWillUnmount:function(){var t=this,e=this.props.flux||this.context.flux;this.mounted=!1,r.forEach(function(n){e.store(n).removeListener("change",t._setStateFromFlux)})},getInitialState:function(){return this.getStateFromFlux()}}};r.componentWillMount=function(){throw new Error('Fluxxor.StoreWatchMixin is a function that takes one or more store names as parameters and returns the mixin, e.g.: mixins: [Fluxxor.StoreWatchMixin("Store1", "Store2")]')},e.default=r},function(t,e,n){"use strict";t.exports="1.7.3"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),c=n(10),f=r(c),l=n(2),h=r(l),p=function(t){function e(){o(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.__actions__={},t}return s(e,t),a(e,[{key:"__handleAction__",value:function(t){var e=t.type,n=t.payload,r=void 0;if(r=this.__actions__[e]){if((0,h.default)(r))r.call(this,n,e);else{if(!r||!(0,h.default)(this[r]))throw new Error("The handler for action type "+e+" is not a function");this[r].call(this,n,e)}return!0}return!1}},{key:"bindActions",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length>1&&n.length%2!==0)throw new Error("bindActions must take an even number of arguments.");var o=function(e,n){if(!n)throw new Error("The handler for action type "+e+" is falsy");t.__actions__[e]=n};if(1===n.length&&(0,f.default)(n[0])){n=n[0];for(var i in n)n.hasOwnProperty(i)&&o(i,n[i])}else for(var s=0;s<n.length;s+=2){var a=n[s],u=n[s+1];if(!a)throw new Error("Argument "+(s+1)+" to bindActions is a falsy value");o(a,u)}}},{key:"waitFor",value:function(t,e){this.dispatcher.waitForStores(this,t,e.bind(this))}}]),e}(u.EventEmitter);e.default=p},function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=n},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t){return"string"==typeof t||!a(t)&&n(t)&&s.call(t)==o}var o="[object String]",i=Object.prototype,s=i.toString,a=Array.isArray;t.exports=r},function(t,e,n){var r,o,i;!function(n,s){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=s():(o=[],r=s,i="function"==typeof r?r.apply(e,o):r,!(void 0!==i&&(t.exports=i)))}(this,function(){"use strict";function t(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function e(e){if(!e)return!0;if(u(e)&&0===e.length)return!0;if("string"!=typeof e){for(var n in e)if(t(e,n))return!1;return!0}return!1}function n(t){return a.call(t)}function r(t){return"object"==typeof t&&"[object Object]"===n(t)}function o(t){return"boolean"==typeof t||"[object Boolean]"===n(t)}function i(t){var e=parseInt(t);return e.toString()===t?e:t}function s(n){function s(e,r){if(n.includeInheritedProps||"number"==typeof r&&Array.isArray(e)||t(e,r))return e[r]}function a(t,e,n,r){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return a(t,e.split(".").map(i),n,r);var o=e[0],u=s(t,o);return 1===e.length?(void 0!==u&&r||(t[o]=n),u):(void 0===u&&("number"==typeof e[1]?t[o]=[]:t[o]={}),a(t[o],e.slice(1),n,r))}n=n||{};var c=function(t){return Object.keys(c).reduce(function(e,n){return"create"===n?e:("function"==typeof c[n]&&(e[n]=c[n].bind(c,t)),e)},{})};return c.has=function(e,r){if("number"==typeof r?r=[r]:"string"==typeof r&&(r=r.split(".")),!r||0===r.length)return!!e;for(var o=0;o<r.length;o++){var s=i(r[o]);if(!("number"==typeof s&&u(e)&&s<e.length||(n.includeInheritedProps?s in Object(e):t(e,s))))return!1;e=e[s]}return!0},c.ensureExists=function(t,e,n){return a(t,e,n,!0)},c.set=function(t,e,n,r){return a(t,e,n,r)},c.insert=function(t,e,n,r){var o=c.get(t,e);r=~~r,u(o)||(o=[],c.set(t,e,o)),o.splice(r,0,n)},c.empty=function(n,i){if(!e(i)&&null!=n){var s,a;if(s=c.get(n,i)){if("string"==typeof s)return c.set(n,i,"");if(o(s))return c.set(n,i,!1);if("number"==typeof s)return c.set(n,i,0);if(u(s))s.length=0;else{if(!r(s))return c.set(n,i,null);for(a in s)t(s,a)&&delete s[a]}}}},c.push=function(t,e){var n=c.get(t,e);u(n)||(n=[],c.set(t,e,n)),n.push.apply(n,Array.prototype.slice.call(arguments,2))},c.coalesce=function(t,e,n){for(var r,o=0,i=e.length;o<i;o++)if(void 0!==(r=c.get(t,e[o])))return r;return n},c.get=function(t,e,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if(null==t)return n;if("string"==typeof e)return c.get(t,e.split("."),n);var r=i(e[0]),o=s(t,r);return void 0===o?n:1===e.length?o:c.get(t[r],e.slice(1),n)},c.del=function(t,n){if("number"==typeof n&&(n=[n]),null==t)return t;if(e(n))return t;if("string"==typeof n)return c.del(t,n.split("."));var r=i(n[0]),o=s(t,r);if(null==o)return o;if(1===n.length)u(t)?t.splice(r,1):delete t[r];else if(void 0!==t[r])return c.del(t[r],n.slice(1));return t},c}var a=Object.prototype.toString,u=Array.isArray||function(t){return"[object Array]"===a.call(t)},c=s();return c.create=s,c.withInheritedProps=s({includeInheritedProps:!0}),c})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=r(o),s=n(4),a=r(s),u=n(6),c=r(u),f=n(5),l=r(f),h=n(7),p=r(h),d=n(3),y=r(d),v={Dispatcher:i.default,Flux:a.default,FluxMixin:c.default,FluxChildMixin:l.default,StoreWatchMixin:p.default,createStore:y.default,version:n(8)};e.default=v}])});
//# sourceMappingURL=fluxxor.min.js.map